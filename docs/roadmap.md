# Pockode MVP Roadmap

## 概述

**目标**：构建可自用的移动端 AI 编程平台 MVP
**核心理念**：AI 编辑为主，手动编辑为辅

### MVP 范围

| 项目 | 决策 |
|------|------|
| 目标用户 | 仅自己使用，快速验证概念 |
| AI 代理 | 仅 Claude CLI |
| 功能 | 对话式编码 + 手动编辑器 + Git（通过对话） |
| 认证 | Header token 认证 |

---

## 阶段 0：项目骨架 + 认证

**目标**：建立可运行的前后端项目结构，含基础认证

### 前端

- [x] 初始化 Vite + React + TypeScript + Tailwind
- [x] 配置 Biome（替代 ESLint + Prettier）

### 后端

- [x] 初始化 Go module
- [x] 基础 HTTP 服务器 + Token 认证

### 交付物

- 前后端可运行，API 带认证

---

## 阶段 1：文件系统

**目标**：支持文件浏览和操作（为 AI 对话做准备）

### 后端

- [ ] 文件 REST API (`/api/fs/*path`)

### 前端

- [ ] 文件浏览器（可展开树形）

### 交付物

- 文件 CRUD 操作

---

## 阶段 2：核心对话功能

**目标**：实现 Chat 界面 + Claude CLI 集成

### 后端

- [ ] Claude CLI 适配器（流式输出）
- [ ] WebSocket 处理器

### 前端

- [ ] Chat 组件
- [ ] WebSocket 连接管理

### 交付物

- 可与 Claude CLI 对话，流式输出

---

## 阶段 3：手动编辑器

**目标**：完成代码编辑器

### 前端

- [ ] 代码编辑器组件
- [ ] 语法高亮

### 交付物

- 可编辑代码
- 语法高亮

---

## 技术决策

| 决策点 | 选择 | 理由 |
|--------|------|------|
| AI 调用 | `--output-format stream-json` | 实时流式输出 + 工具调用详情 |
| 实时通信 | WebSocket | 双向通信，支持取消 |
| 文件存储 | 文件系统目录 | 简单，便于 Claude 操作 |

---

## 风险与对策

| 风险 | 对策 |
|------|------|
| Claude CLI 进程泄漏 | 超时自动终止 |
| WebSocket 连接不稳定 | 自动重连 |
| 路径遍历攻击 | 路径验证 |

---

## 后续扩展方向

- 多 AI 代理支持（Gemini、GPT）
- Git 可视化 UI
